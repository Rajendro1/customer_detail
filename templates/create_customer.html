<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
</head>
<body>
<div class="container">
	<div class="mt-2">
		<div class="d-flex justify-content-center">
		<form class="w-50" action="" method="POST">
				{{ form.hidden_tag() }}
				<div class="card-header" style="background-color: #ffffff;border-bottom:0px;">
					<center><h2>Create Customer</h2></center>
				</div>
				<div class="card-body">
					<div class="row mb-3">
						{{ form.ssn_id.label(class='form-control-label col-sm-4') }}
						{{ form.ssn_id(class="form-control col-sm-7 ml-2") }}
						
					</div>
					<div class="row mb-3">
						{{ form.name.label(class='form-control-label col-sm-4') }}
						{{ form.name(class="form-control col-sm-7 ml-2") }}
						
					</div>
					<div class="row mb-3">
						{{ form.age.label(class='form-control-label col-sm-4') }}
						{{ form.age(class="form-control col-sm-7 ml-2") }}
						
					</div>
					<div class="row mb-3">
						{{ form.address.label(class='form-control-label col-sm-4') }}
						{{ form.address(class="form-control col-sm-7 ml-2") }}
						
					</div>
					<div class="row mb-3">
						{{ form.state.label(class='form-control-label col-sm-4') }}
						{{ form.state(class="form-control col-sm-7 ml-2", id='state') }}
						
					</div>
					<div class="row mb-3">
						{{ form.city.label(class='form-control-label col-sm-4') }}
						{{ form.city(class="form-control col-sm-7 ml-2",id='city') }}
						
					</div>
				</div>
				<div class="card-footer" style="background-color: #ffffff;border-top:0px;">
					<center>{{form.submit(class="btn btn-dark")}}</center>
				</div>
		</form>
		</div>
	</div>
</div>	
	<script type="text/javascript">
		let select_state = document.getElementById('state');
		let select_city	= document.getElementById('city');
		// let show = document.getElementById('show')
		select_state.onchange = function(){
			state = select_state.value;
			// show.innerHTML = state
			fetch('/city/'+state).then(function(response) {
				response.json().then(function(data){
					let optionHTML = "";
					for(let city of data.cities){
						console.log(city)
						optionHTML+="<option value="+city.id+">"+city.name+"</option>"
					}
					select_city.innerHTML = optionHTML;
				})
			})
		}
	</script>

</body>
</html>
